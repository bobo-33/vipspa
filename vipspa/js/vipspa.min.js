!function(){function t(){}function e(t){var e=vipspa.routerMap[t.url];if("undefined"==typeof e){var r=vipspa.routerMap.defaults;return e=vipspa.routerMap[r],location.hash=r,!1}$.ajax({type:"GET",url:e.templateUrl,dataType:"html",success:function(t,r,a){$(vipspa.mainView).html(t),n(e.controller)},error:function(t,e,r){if(0===$("#error").length)return!1;var n=$("#error").html();n=n.replace(/{{errStatus}}/,t.status),n=n.replace(/{{errContent}}/,t.responseText),$(vipspa.mainView).html(n)}})}function r(){var t=location.hash,r=vipspa.parse(t);e(r)}function n(t,e){$(".scriptDom").remove();var r,n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("class","scriptDom"),e&&(n.onreadystatechange=n.onload=function(){r||e(),r=!0});var a=document.getElementsByTagName("head")[0];(a||document.body).appendChild(n)}t.prototype.start=function(t){var e=this;e.routerMap=t.router,e.mainView=t.view,r(),window.onhashchange=function(){r()}};var a=[];t.prototype.getMessage=function(t){var e={};return $.each(a,function(r,n){n.id===t&&(e=n)}),e},t.prototype.setMessage=function(t){var e=JSON.parse(JSON.stringify(t));$.each(a,function(t,r){return r.id===e.id?(r=e,!1):void 0}),a.push(e)},t.prototype.stringify=function(t,e){var r,n="";for(var a in e)n+=a+"="+encodeURIComponent(e[a])+"&";return""===n?r=t:(n=n.substring(0,n.length-1),r=t+"?"+n),r},t.prototype.parse=function(t){var e="undefined"==typeof t?location.hash:t,r={url:"",param:{}},n={},a="",o=e.indexOf("?");if(""===e)return r;if(o>-1){a=e.substring(1,o);var i=e.substring(o+1),s=i.split("&");$.each(s,function(t,e){var r,a,o=e.split("=");r=o[0],a=o[1],""!=r&&(n[r]=decodeURIComponent(a))})}else a=e.substring(1),n={};return{url:a,param:n}},window.vipspa=new t}();